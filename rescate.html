<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <title>Ubipet - Rescate</title>
    <link rel="stylesheet" href="css/estilos.css">
    <style>
        body { 
            background: #f7ede3; 
            font-family: sans-serif; 
            max-width: 500px; 
            margin: 0 auto; 
            padding: 20px; 
        }
        h1, h3 { color: #84a59e; }
        .alerta-roja { 
            background-color: #f5bd60; 
            padding: 15px; 
            border-radius: 10px; 
            margin-bottom: 15px; 
        }
        button { 
            display: block; 
            width: 100%; 
            padding: 12px; 
            margin: 8px 0; 
            background: #f5cac2; 
            color: black; 
            border: none; 
            border-radius: 8px; 
            font-weight: bold; 
            cursor: pointer; 
        }
        button:hover { opacity: 0.8; }
    </style>
</head>
<body>

    <h1>Ubipet - Rescate</h1>
    <h2 id="tituloRescate">Mascota encontrada</h2>

    <div id="datosRescate"></div>

    <!-- Datos ocultos del due√±o (se deber√≠an cargar desde Supabase) -->
    <input type="hidden" id="telefono" value="56912345678">
    <input type="hidden" id="emailDueno" value="dueno@correo.com">

    <div id="botonesRescate">
        <button onclick="contactarDueno()">üìû Llamar / WhatsApp</button>
        <button onclick="enviarCorreo()">‚úâÔ∏è Enviar Correo</button>
        <button onclick="copiarTelefono()">üìã Copiar Tel√©fono</button>
        <button onclick="enviarUbicacion()">üìç Enviar mi ubicaci√≥n</button>
    </div>

    <!-- ‚úÖ Scripts -->
    <script type="module" src="js/app.js"></script>
    <script>
  // FIX: Cargar QR inmediatamente
  window.addEventListener('load', function() {
    if (window.location.search.includes('data=')) {
      setTimeout(() => {
        if (typeof window.cargarRescate === 'function') {
          window.cargarRescate()
        }
      }, 100)
    }
  })
</script>

</body>
</html>
